<!DOCTYPE html>
<html lang="en">
<head>
    
    <link   rel="stylesheet"     href="../../assets/css/form_read.css">
    <meta charset="UTF-8">   
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form_edit</title>
    <script src="https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuidv4.min.js"></script>
</head>
<body>
    <form role="form">
        
        <div class="container">
        <label for="name"><b> pg_Name</b></label>
        <input type="text" placeholder="pg_name" id="name" pattern="[a-zA-Z]+"id="name" ><br><br>
        
       
        <label for="type"><b>Rooms categories are available and rent</b></label><br>
        
      <label for="sharing"> single sharing </label><input  placeholder="rent" id="onesharing"   ><br><br>

     
      <label for="sharing">Twin sharing </label><input  placeholder="rent" id="twosharing" ><br><br>

      
      <label for="sharing"> Triple sharing  </label><input  placeholder="rent"id="threesharing" ><br><br>

      
      <label for="sharing"> Four sharing </label><input  placeholder="rent"id="foursharing"  ><br><br>

      <label for="name"><b> Deposite amount</b></label>
      <input type="text" placeholder=""name="fname" id="amount" required><br><br>
      
      <label for="sharing"> Notice Period </label>
      <input  id="period" required><br><br>
    
      <label for="sharing"> Closing Time </label>
      <input  id="time" required><br><br>
   

      <label for="sharing"> Available For</label>
      <input  id="available" required><br><br>
  
      <label for="image1"> Fecilities</label>
      <input  placeholder="url" id="image1"  ></input><br><br>


       <label for="image"> Fecilities</label>
       <input placeholder="url" id="image2"  ></input><br><br>

        <label for="image"> Fecilities</label>
         <input  placeholder="url" id="lastimage"  ></input><br><br>

         <label for="image1"> Fecilities</label>
          <input placeholder="url" id="image4"  ></input><br><br>

   
    <label for="sharing"> Total Number of Beds </label>
    <input  id="beds" required><br><br>
     

    <label for="sharing">parking</label>
    <input  id="parking" name="vehicle1"  ><br><br>

    

      <label for="sharing">wifi </label>
    <input   id="wifi" ><br><br>

   
    <label for="sharing"> Food</label>
    <input   id="food" ><br><br>

    
    <label for="sharing"> fridge</label>
    <input  id="fridge"  ><br><br>

   
    <label for="sharing">TV</label>
    <input   id="tv" ><br><br>

      <label for="pg_name"><b>Image</b></label>
        <input type="text"  name="image" id="image" ><br><br>

         <label for="address"><b> Address</b></label><br>
        <textarea type="text"id="address" ></textarea><br>
        
        <div class="last">
            <!-- <button type="button"  onclick="del(event)"class="registerbtn" >delete</button> -->
          <button type="button"  onclick="update(event)" class="registerbtn">submit</button>
          
      </div>
    </form>
    <script>
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const my_uuid = urlParams.get('my_uuid');
        let users = JSON.parse(localStorage.getItem("users"));

    
   function login_data(e){
      
      return e.my_uuid == my_uuid;
    }
     let user_data = users.find(login_data);
     console.log(users)

     document.getElementById("name").value = user_data["name"];
document.getElementById("onesharing").value = user_data["sharing"]["onesharing"];
    document.getElementById("twosharing").value = user_data["sharing"]["twosharing"];
    document.getElementById("threesharing").value = user_data["sharing"]["threesharing"];
    document.getElementById("foursharing").value = user_data["sharing"]["foursharing"];
   document.getElementById("beds").value = user_data["beds"];
   document.getElementById("time").value = user_data["time"];
   document.getElementById("period").value = user_data["period"];
   document.getElementById("available").value = user_data["available"];
    document.getElementById("image").value = user_data["image"];
    document.getElementById("address").value = user_data["address"];
    document.getElementById("amount").value = user_data["amount"];
     
   document.getElementById("parking").value = user_data["fecilities"]["parking"];
   document.getElementById("tv").value = user_data["fecilities"]["tv"];
   document.getElementById("wifi").value = user_data["fecilities"]["wifi"];
   document.getElementById("food").value = user_data["fecilities"]["food"];
   document.getElementById("fridge").value = user_data["fecilities"]["fridge"]; 
   // more images //
   document.getElementById("image1").value = user_data["house_fecilities_image"]["image1"];
   document.getElementById("image2").value = user_data["house_fecilities_image"]["image2"];
   document.getElementById("lastimage").value = user_data["house_fecilities_image"]["lastimage"];
   document.getElementById("image4").value = user_data["house_fecilities_image"]["image4"];

    function update(e){

e.preventDefault();

let up_name = document.getElementById("name").value
let up_address = document.getElementById("address").value
let up_onesharing = document.getElementById("onesharing").value
let up_twosharing = document.getElementById("twosharing").value
let up_threesharing = document.getElementById("threesharing").value
let up_foursharing = document.getElementById("foursharing").value
let up_image = document.getElementById("image").value
let up_beds = document.getElementById("beds").value
let up_parking = document.getElementById("parking").value
let up_tv = document.getElementById("tv").value
let up_wifi = document.getElementById("wifi").value
let up_food = document.getElementById("food").value
let up_fridge = document.getElementById("fridge").value
let up_available = document.getElementById("available").value
let up_image1 = document.getElementById("image1").value
let up_image2 = document.getElementById("image2").value
let up_lastimage = document.getElementById("lastimage").value
let up_image4 = document.getElementById("image4").value
let up_period = document.getElementById("period").value
let up_time = document.getElementById("time").value
let up_amount = document.getElementById("amount").value

user_data["name"] = up_name;
user_data["address"] = up_address;
user_data["beds"] = up_beds;
user_data["sharing"]["onesharing"] = up_onesharing;
user_data["sharing"]["twosharing"] = up_twosharing;
user_data["sharing"]["threesharing"] = up_threesharing;
user_data["sharing"]["foursharing"] = up_foursharing;
user_data ["image"] = up_image;
user_data["fecilities"]["parking"] = up_parking;
user_data["fecilities"]["tv"] = up_tv;
user_data["fecilities"]["wifi"] = up_wifi;
user_data["fecilities"]["food"] = up_food;
user_data["fecilities"]["fridge"] = up_fridge;
user_data["available"] = up_available;
user_data["house_fecilities_image"]["image1"] = up_image1;
user_data["house_fecilities_image"]["image2"] = up_image2;
user_data["house_fecilities_image"]["lastimage"] = up_lastimage;
user_data["house_fecilities_image"]["image4"] =  up_image4;
user_data["period"] = up_period;
user_data["time"] = up_time;
user_data["amount"] =up_amount;

localStorage.setItem("users", JSON.stringify(users));

window.location.href="./edit and update owners.html"

}

// function del(e){
// e.preventDefault();
// if(confirm("Are you sure delete your account?")){

// let userId = JSON.parse(localStorage.getItem("name"));
// let users = JSON.parse(localStorage.getItem("users"));

// function login_data(e){
 
// return e.name == name;
// }

// user_data = users.find(login_data);


// const indexOfUser = users.indexOf(user_data);
// console.log(indexOfUser);
// users.splice(indexOfUser, 1);
// // console.log(indexOfUser);  
// localStorage.setItem("users", JSON.stringify(users));   
// window.location.href="./edit and update owners.html";
// }
// // localStorage.
// }


    </script>

