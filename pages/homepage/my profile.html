<!DOCTYPE html>
<html lang="en">

    <head>
        <link rel="stylesheet" href="../../assets/css/mypage.css">
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>mypage</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
            rel="stylesheet">
    </head>
    <header>
    
        <script src="/assets/js/header.js"></script>   
        
    </header>

    <form>
        <div class="container">
            <div class="photo">
                <h1>My profile</h1>
                <img src="../../assets/images/avathar.jpg" alt="Avathar" class="avathar" height="140vh" width="18%">
            </div>
       
            <label for="name">
                <b> Name</b>
            </label>
            <input type="text" placeholder="Name" name="fname" pattern="[a-zA-Z]+" id="name" disabled>

            <label for="phone">
                <b>phone_number</b>
            </label>
            <input type="text" placeholder="phone_number" name="tel" pattern="[0-9].{9}" id="phone_number" disabled>

            <label for="email">
                <b>Email</b>
            </label>
            <input type="text" placeholder="Enter Email" name="email"
                pattern="^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$"
                id="email" disabled>

            <label for="cars">
                <b>Choose Owner/Customer</b> 
            </label>
            <select name="available" id="customer_or_owner" disabled>
                <option>Customer</option>
                <option>Owner</option>
            </select>
            <br>
            <br>

            <label for="address">
                <b>Address</b>
            </label>
            <br>
            <textarea id="address" disabled></textarea>

            <div class="last">
           
                <button type="submit" class="registerbtn">
                    <a href="../homepage/edit.html">Edit</a>
                </button>
                <button type="button" class="registerbtn" id="back"> Back </button> 
                <button type="button" class="register" onclick="Logout(event)"> Logout</button>
            </div> 

        </div>
    </form>
    <script>const uniqueID = JSON.parse(localStorage.getItem("userId"));

    const user_cred = JSON.parse(localStorage.getItem("user_cred"));

    console.log(user_cred);

    function login_data(e) {
      return e.email == userId;
    }
    user_data = user_cred.find(login_data);

    console.log(user_data);

    document.getElementById("name").value = user_data.name;
    document.getElementById("phone_number").value = user_data.phone_number;
    document.getElementById("email").value = user_data.email;
    document.getElementById("address").value = user_data.address;
    document.getElementById("customer_or_owner").value =
  user_data.customer_or_owner;

    // function back() {
    //     let user_cred = localStorage.getItem("user_cred");
    //     if (user_cred["customer_or_owner"] == "Customer") {
    //         window.location.href = "../homepage/rent.html";
    //         return;
    //     } else {
    //         window.location.href = "../products/seller_product.html";
    //         return;
    //     }
    // }

    const backBtn = document.querySelector("#back");
    backBtn.addEventListener("click", back);
    function back() {
      // e.preventDefault()

      const findData = user_cred.filter((data) => data.email == user_data.email);

      console.log(findData);

      if (findData[0].customer_or_owner == "Owner") {
        window.location.href = "../products/form.html";
  } else {
        window.location.href = "../products/rent.html";
      }
    }
    function Logout(e) {
  alert("are you sure to logout");

  localStorage.removeItem("userId");
  window.location.href = "/index.html";
}

    // console.log(function back(){});

    // owner data//
    // function login_data(e, userId) {
    // return e.email == userId;
    // }

    // function del(e) {
    //     e.preventDefault();

    //     if (confirm("Are you sure delete your account?")) {

    //         let userId = JSON.parse(localStorage.getItem('userId'));
    //         let user_cred = JSON.parse(localStorage.getItem('user_cred'));

    //         function login_data(e) {
    //             return e.email == userId;
    //         }

    //         user_data = user_cred.find(login_data);

    //         const indexOfUser = user_cred.indexOf(user_data);
    //         console.log(indexOfUser);
    //         user_cred.splice(indexOfUser, 1);
    //         // console.log(indexOfUser);
    //         localStorage.removeItem("userId")
    //         localStorage.setItem("user_cred", JSON.stringify(user_cred));
    
    //         window.location.href="/index.html";

    //         let indexOfUser = user_cred.indexOf(user_data);
    //         console.log(indexOfUser);
    //         user_cred.splice(indexOfUser,1);
    //         // console.log(indexOfUser);
    //         localStorage.setItem("user_cred", JSON.stringify(user_cred));

    //                 }
    //         // localStorage.
    //         }
    //         function logOut(e){
    //             localStorage.setItem('userId'," ");
    //             window.location.href="./index.html";
    //     }
//     }
// }
</script>
</body>

</html>